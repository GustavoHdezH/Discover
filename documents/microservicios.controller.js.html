<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: microservicios.controller.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: microservicios.controller.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const controllermicroservicios = {};

const Servicios = require('../models/servicios');

// Renderizar el formulario
controllermicroservicios.renderMicroserviciosForm = (req, res) =>{
    res.render('microservicios/new-microservicio');
};
//Crear microservicio
controllermicroservicios.createMicroservicios = async (req, res) =>{
    //Se obtienen los datos desde el formulario
    const {container, port, server, discover, code, team} = req.body;
    //Se pasan las propiedades que se requiere para crear el objeto
    const newServicios = Servicios({
        container,port, server, discover, code, team
    })
    //Se guarda el objeto en la colleccion
    await newServicios.save();
    req.flash('success_msg','Contenedor agregador');
    res.redirect('/microservicios/add');
};
// Renderizar microservicios
controllermicroservicios.renderMicroservicios = async (req, res) =>{
    //find({}).lean(); resuelve el problema
    //Handlebars: Access has been denied to resolve the property
    const servicios = await Servicios.find({}).lean();
    // Se renderiza la vista en el navegador y se pasan los microservicios como objeto
    res.render('microservicios/all-microservicios', { servicios });
    
};
// Editar microservicios
controllermicroservicios.renderEditMicroserviciosForm = async (req,res) => {
    //Se añade propiedad .lean() para renderizar el objeto
    const servicios = await Servicios.findById(req.params.id).lean();
    res.render('microservicios/edit-microservicios', {servicios});
};
controllermicroservicios.updateMicroservicios = async (req, res) => {
    const {container, port, server, discover, code, team} = req.body;
    await Servicios.findByIdAndUpdate(req.params.id, { container,port, server, discover, code, team});
    req.flash('success_msg','Contenedor actualizo correctamente');
    res.redirect('/microservicios');
};

// eliminar microservicios
controllermicroservicios.deleteMicroservicios = async (req,res) => {
    await Servicios.findByIdAndDelete(req.params.id);
    req.flash('success_msg','Contenedor borrado correctamente');
    res.redirect('/microservicios')
};

module.exports = controllermicroservicios;
/**
 * @module controllermicroservicios
 * @desc Este modulo se encarga de hacer las operaciones para la creación, edición,
 * eliminación y actualización de los contendores. 
 */</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-controllermicroservicios.html">controllermicroservicios</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Aug 10 2021 11:21:04 GMT-0500 (hora de verano central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
